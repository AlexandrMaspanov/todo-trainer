import{j as e,r as o,l as j,a as C,m as f,C as b,n as I,S as d,p as U,q as v,v as N}from"./index-8NbFKH9F.js";import{F as L}from"./index-_Sbz4MIk.js";import{U as y}from"./UserPreview-BB3uTDqz.js";import{C as F}from"./CustomSelect-BHGblSmG.js";import{u as R}from"./useSnackbar-D5dfs4V3.js";const q="_loaderContainer_1ug94_1",E="_spinner_1ug94_15",u={loaderContainer:q,spinner:E},k=()=>e.jsx("div",{className:u.loaderContainer,role:"status","aria-label":"Загрузка",children:e.jsx("div",{className:u.spinner})}),M="_loginSection_19dqo_1",T="_userLabel_19dqo_33",w="_userIconInline_19dqo_43",B="_loginForm_19dqo_53",D="_loginRedirect_19dqo_65",P="_emptyMessage_19dqo_79",t={loginSection:M,userLabel:T,userIconInline:w,loginForm:B,loginRedirect:D,emptyMessage:P},$=()=>{const[r,m]=o.useState([]),[n,g]=o.useState(""),[i,p]=o.useState(!1),l=j(),_=C(),{showSnackbar:c}=R();o.useEffect(()=>{m(f())},[]);const h=r.map(s=>({value:s.id,label:s.name})),x=s=>{if(s.preventDefault(),!n){c("Выберите пользователя",d.ERROR);return}p(!0),U(n);const S=v(n);_(N(S)),c("Добро пожаловать!",d.SUCCESS),l("/")},a=r.find(s=>s.id===n);return e.jsxs("section",{className:t.loginSection,children:[e.jsx("h1",{children:"Вход"}),e.jsxs("form",{onSubmit:x,className:t.loginForm,children:[r.length===0?e.jsx("p",{className:t.emptyMessage,children:"Нет доступных пользователей"}):e.jsxs(e.Fragment,{children:[e.jsx("label",{htmlFor:"userselect",className:t.userLabel,children:e.jsx(L,{className:t.userIconInline})}),e.jsx(F,{id:"userselect",value:n,onChange:s=>g(s.target.value),options:h,placeholder:"Выберите пользователя"}),a&&e.jsx(y,{photo:a.photo,name:a.name})]}),e.jsx(b,{type:"submit",disabled:!n||i,fullWidth:!0,children:i?e.jsx(k,{}):"Войти"})]}),e.jsxs("p",{className:t.loginRedirect,children:["Нет аккаунта? ",e.jsx(I,{onClick:()=>l("/register"),children:"Зарегистрируйтесь"})]})]})};export{$ as default};
