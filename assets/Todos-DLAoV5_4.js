import{u as k,a as $,j as d,s as it,r as f,C as j,c as rt,o as at,R as x,b as A,d as lt,I as ct,e as ut,f as q,t as dt,g as pt,h as ft,i as ht,k as mt}from"./index-DD8JO9LC.js";import{C as vt}from"./CustomSelect-CA4NESJJ.js";function Et(t,s=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(s)}function xt(t,s=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(s)}function gt(t,s="expected all items to be functions, instead received the following types: "){if(!t.every(a=>typeof a=="function")){const a=t.map(e=>typeof e=="function"?`function ${e.name||"unnamed"}()`:typeof e).join(", ");throw new TypeError(`${s}[${a}]`)}}var J=t=>Array.isArray(t)?t:[t];function Ct(t){const s=Array.isArray(t[0])?t[0]:t;return gt(s,"createSelector expects all input-selectors to be functions, but received the following types: "),s}function bt(t,s){const a=[],{length:e}=t;for(let o=0;o<e;o++)a.push(t[o].apply(null,s));return a}var _t=class{constructor(t){this.value=t}deref(){return this.value}},Nt=typeof WeakRef<"u"?WeakRef:_t,yt=0,Q=1;function D(){return{s:yt,v:void 0,o:null,p:null}}function K(t,s={}){let a=D();const{resultEqualityCheck:e}=s;let o,n=0;function r(){let i=a;const{length:l}=arguments;for(let p=0,h=l;p<h;p++){const m=arguments[p];if(typeof m=="function"||typeof m=="object"&&m!==null){let v=i.o;v===null&&(i.o=v=new WeakMap);const g=v.get(m);g===void 0?(i=D(),v.set(m,i)):i=g}else{let v=i.p;v===null&&(i.p=v=new Map);const g=v.get(m);g===void 0?(i=D(),v.set(m,i)):i=g}}const c=i;let u;if(i.s===Q)u=i.v;else if(u=t.apply(null,arguments),n++,e){const p=o?.deref?.()??o;p!=null&&e(p,u)&&(u=p,n!==0&&n--),o=typeof u=="object"&&u!==null||typeof u=="function"?new Nt(u):u}return c.s=Q,c.v=u,u}return r.clearCache=()=>{a=D(),r.resetResultsCount()},r.resultsCount=()=>n,r.resetResultsCount=()=>{n=0},r}function St(t,...s){const a=typeof t=="function"?{memoize:t,memoizeOptions:s}:t,e=(...o)=>{let n=0,r=0,i,l={},c=o.pop();typeof c=="object"&&(l=c,c=o.pop()),Et(c,`createSelector expects an output function after the inputs, but received: [${typeof c}]`);const u={...a,...l},{memoize:p,memoizeOptions:h=[],argsMemoize:m=K,argsMemoizeOptions:v=[]}=u,g=J(h),F=J(v),I=Ct(o),E=p(function(){return n++,c.apply(null,arguments)},...g),nt=m(function(){r++;const ot=bt(I,arguments);return i=E.apply(null,ot),i},...F);return Object.assign(nt,{resultFunc:c,memoizedResultFunc:E,dependencies:I,dependencyRecomputations:()=>r,resetDependencyRecomputations:()=>{r=0},lastResult:()=>i,recomputations:()=>n,resetRecomputations:()=>{n=0},memoize:p,argsMemoize:m})};return Object.assign(e,{withTypes:()=>e}),e}var tt=St(K),Tt=Object.assign((t,s=tt)=>{xt(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const a=Object.keys(t),e=a.map(n=>t[n]);return s(e,(...n)=>n.reduce((r,i,l)=>(r[a[l]]=i,r),{}))},{withTypes:()=>Tt});const jt="_todosFilter_suhzm_1",Rt={todosFilter:jt},Ot=[{value:"all",label:"Все"},{value:"active",label:"Активные"},{value:"completed",label:"Выполненные"}],kt=()=>{const t=k(a=>a.filter),s=$();return d.jsxs("div",{className:Rt.todosFilter,children:[d.jsx("label",{htmlFor:"filter",children:"Фильтр: "}),d.jsx(vt,{id:"filter",value:t,onChange:a=>s(it(a.target.value)),options:Ot,placeholder:"Фильтр задач"})]})},It=f.memo(()=>{const t=$(),a=k(e=>e.todos.todos).some(e=>e.completed);return d.jsx(j,{disabled:!a,hint:a?"":"Нет завершённых задач",onClick:()=>t(rt()),children:"Очистить выполненные"})}),At=()=>{const t=$();return d.jsx(j,{onClick:()=>t(at()),"aria-label":"Открыть форму добавления задачи",children:"+ Добавить задачу"})};function M(){return M=Object.assign?Object.assign.bind():function(t){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var e in a)({}).hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},M.apply(null,arguments)}function z(t,s){if(t==null)return{};var a={};for(var e in t)if({}.hasOwnProperty.call(t,e)){if(s.indexOf(e)!==-1)continue;a[e]=t[e]}return a}function B(t,s){return B=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,e){return a.__proto__=e,a},B(t,s)}function W(t,s){t.prototype=Object.create(s.prototype),t.prototype.constructor=t,B(t,s)}function Dt(t,s){return t.classList?!!s&&t.classList.contains(s):(" "+(t.className.baseVal||t.className)+" ").indexOf(" "+s+" ")!==-1}function Mt(t,s){t.classList?t.classList.add(s):Dt(t,s)||(typeof t.className=="string"?t.className=t.className+" "+s:t.setAttribute("class",(t.className&&t.className.baseVal||"")+" "+s))}function Y(t,s){return t.replace(new RegExp("(^|\\s)"+s+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function wt(t,s){t.classList?t.classList.remove(s):typeof t.className=="string"?t.className=Y(t.className,s):t.setAttribute("class",Y(t.className&&t.className.baseVal||"",s))}const Z={disabled:!1},w=x.createContext(null);var et=function(s){return s.scrollTop},O="unmounted",_="exited",N="entering",T="entered",U="exiting",C=function(t){W(s,t);function s(e,o){var n;n=t.call(this,e,o)||this;var r=o,i=r&&!r.isMounting?e.enter:e.appear,l;return n.appearStatus=null,e.in?i?(l=_,n.appearStatus=N):l=T:e.unmountOnExit||e.mountOnEnter?l=O:l=_,n.state={status:l},n.nextCallback=null,n}s.getDerivedStateFromProps=function(o,n){var r=o.in;return r&&n.status===O?{status:_}:null};var a=s.prototype;return a.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},a.componentDidUpdate=function(o){var n=null;if(o!==this.props){var r=this.state.status;this.props.in?r!==N&&r!==T&&(n=N):(r===N||r===T)&&(n=U)}this.updateStatus(!1,n)},a.componentWillUnmount=function(){this.cancelNextCallback()},a.getTimeouts=function(){var o=this.props.timeout,n,r,i;return n=r=i=o,o!=null&&typeof o!="number"&&(n=o.exit,r=o.enter,i=o.appear!==void 0?o.appear:r),{exit:n,enter:r,appear:i}},a.updateStatus=function(o,n){if(o===void 0&&(o=!1),n!==null)if(this.cancelNextCallback(),n===N){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:A.findDOMNode(this);r&&et(r)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===_&&this.setState({status:O})},a.performEnter=function(o){var n=this,r=this.props.enter,i=this.context?this.context.isMounting:o,l=this.props.nodeRef?[i]:[A.findDOMNode(this),i],c=l[0],u=l[1],p=this.getTimeouts(),h=i?p.appear:p.enter;if(!o&&!r||Z.disabled){this.safeSetState({status:T},function(){n.props.onEntered(c)});return}this.props.onEnter(c,u),this.safeSetState({status:N},function(){n.props.onEntering(c,u),n.onTransitionEnd(h,function(){n.safeSetState({status:T},function(){n.props.onEntered(c,u)})})})},a.performExit=function(){var o=this,n=this.props.exit,r=this.getTimeouts(),i=this.props.nodeRef?void 0:A.findDOMNode(this);if(!n||Z.disabled){this.safeSetState({status:_},function(){o.props.onExited(i)});return}this.props.onExit(i),this.safeSetState({status:U},function(){o.props.onExiting(i),o.onTransitionEnd(r.exit,function(){o.safeSetState({status:_},function(){o.props.onExited(i)})})})},a.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},a.safeSetState=function(o,n){n=this.setNextCallback(n),this.setState(o,n)},a.setNextCallback=function(o){var n=this,r=!0;return this.nextCallback=function(i){r&&(r=!1,n.nextCallback=null,o(i))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},a.onTransitionEnd=function(o,n){this.setNextCallback(n);var r=this.props.nodeRef?this.props.nodeRef.current:A.findDOMNode(this),i=o==null&&!this.props.addEndListener;if(!r||i){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],c=l[0],u=l[1];this.props.addEndListener(c,u)}o!=null&&setTimeout(this.nextCallback,o)},a.render=function(){var o=this.state.status;if(o===O)return null;var n=this.props,r=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var i=z(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return x.createElement(w.Provider,{value:null},typeof r=="function"?r(o,i):x.cloneElement(x.Children.only(r),i))},s}(x.Component);C.contextType=w;C.propTypes={};function S(){}C.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:S,onEntering:S,onEntered:S,onExit:S,onExiting:S,onExited:S};C.UNMOUNTED=O;C.EXITED=_;C.ENTERING=N;C.ENTERED=T;C.EXITING=U;var $t=function(s,a){return s&&a&&a.split(" ").forEach(function(e){return Mt(s,e)})},L=function(s,a){return s&&a&&a.split(" ").forEach(function(e){return wt(s,e)})},G=function(t){W(s,t);function s(){for(var e,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return e=t.call.apply(t,[this].concat(n))||this,e.appliedClasses={appear:{},enter:{},exit:{}},e.onEnter=function(i,l){var c=e.resolveArguments(i,l),u=c[0],p=c[1];e.removeClasses(u,"exit"),e.addClass(u,p?"appear":"enter","base"),e.props.onEnter&&e.props.onEnter(i,l)},e.onEntering=function(i,l){var c=e.resolveArguments(i,l),u=c[0],p=c[1],h=p?"appear":"enter";e.addClass(u,h,"active"),e.props.onEntering&&e.props.onEntering(i,l)},e.onEntered=function(i,l){var c=e.resolveArguments(i,l),u=c[0],p=c[1],h=p?"appear":"enter";e.removeClasses(u,h),e.addClass(u,h,"done"),e.props.onEntered&&e.props.onEntered(i,l)},e.onExit=function(i){var l=e.resolveArguments(i),c=l[0];e.removeClasses(c,"appear"),e.removeClasses(c,"enter"),e.addClass(c,"exit","base"),e.props.onExit&&e.props.onExit(i)},e.onExiting=function(i){var l=e.resolveArguments(i),c=l[0];e.addClass(c,"exit","active"),e.props.onExiting&&e.props.onExiting(i)},e.onExited=function(i){var l=e.resolveArguments(i),c=l[0];e.removeClasses(c,"exit"),e.addClass(c,"exit","done"),e.props.onExited&&e.props.onExited(i)},e.resolveArguments=function(i,l){return e.props.nodeRef?[e.props.nodeRef.current,i]:[i,l]},e.getClassNames=function(i){var l=e.props.classNames,c=typeof l=="string",u=c&&l?l+"-":"",p=c?""+u+i:l[i],h=c?p+"-active":l[i+"Active"],m=c?p+"-done":l[i+"Done"];return{baseClassName:p,activeClassName:h,doneClassName:m}},e}var a=s.prototype;return a.addClass=function(o,n,r){var i=this.getClassNames(n)[r+"ClassName"],l=this.getClassNames("enter"),c=l.doneClassName;n==="appear"&&r==="done"&&c&&(i+=" "+c),r==="active"&&o&&et(o),i&&(this.appliedClasses[n][r]=i,$t(o,i))},a.removeClasses=function(o,n){var r=this.appliedClasses[n],i=r.base,l=r.active,c=r.done;this.appliedClasses[n]={},i&&L(o,i),l&&L(o,l),c&&L(o,c)},a.render=function(){var o=this.props;o.classNames;var n=z(o,["classNames"]);return x.createElement(C,M({},n,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},s}(x.Component);G.defaultProps={classNames:""};G.propTypes={};function Ft(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function X(t,s){var a=function(n){return s&&f.isValidElement(n)?s(n):n},e=Object.create(null);return t&&f.Children.map(t,function(o){return o}).forEach(function(o){e[o.key]=a(o)}),e}function Lt(t,s){t=t||{},s=s||{};function a(u){return u in s?s[u]:t[u]}var e=Object.create(null),o=[];for(var n in t)n in s?o.length&&(e[n]=o,o=[]):o.push(n);var r,i={};for(var l in s){if(e[l])for(r=0;r<e[l].length;r++){var c=e[l][r];i[e[l][r]]=a(c)}i[l]=a(l)}for(r=0;r<o.length;r++)i[o[r]]=a(o[r]);return i}function y(t,s,a){return a[s]!=null?a[s]:t.props[s]}function Pt(t,s){return X(t.children,function(a){return f.cloneElement(a,{onExited:s.bind(null,a),in:!0,appear:y(a,"appear",t),enter:y(a,"enter",t),exit:y(a,"exit",t)})})}function Vt(t,s,a){var e=X(t.children),o=Lt(s,e);return Object.keys(o).forEach(function(n){var r=o[n];if(f.isValidElement(r)){var i=n in s,l=n in e,c=s[n],u=f.isValidElement(c)&&!c.props.in;l&&(!i||u)?o[n]=f.cloneElement(r,{onExited:a.bind(null,r),in:!0,exit:y(r,"exit",t),enter:y(r,"enter",t)}):!l&&i&&!u?o[n]=f.cloneElement(r,{in:!1}):l&&i&&f.isValidElement(c)&&(o[n]=f.cloneElement(r,{onExited:a.bind(null,r),in:c.props.in,exit:y(r,"exit",t),enter:y(r,"enter",t)}))}}),o}var Bt=Object.values||function(t){return Object.keys(t).map(function(s){return t[s]})},Ut={component:"div",childFactory:function(s){return s}},H=function(t){W(s,t);function s(e,o){var n;n=t.call(this,e,o)||this;var r=n.handleExited.bind(Ft(n));return n.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},n}var a=s.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(o,n){var r=n.children,i=n.handleExited,l=n.firstRender;return{children:l?Pt(o,i):Vt(o,r,i),firstRender:!1}},a.handleExited=function(o,n){var r=X(this.props.children);o.key in r||(o.props.onExited&&o.props.onExited(n),this.mounted&&this.setState(function(i){var l=M({},i.children);return delete l[o.key],{children:l}}))},a.render=function(){var o=this.props,n=o.component,r=o.childFactory,i=z(o,["component","childFactory"]),l=this.state.contextValue,c=Bt(this.state.children).map(r);return delete i.appear,delete i.enter,delete i.exit,n===null?x.createElement(w.Provider,{value:l},c):x.createElement(w.Provider,{value:l},x.createElement(n,i,c))},s}(x.Component);H.propTypes={};H.defaultProps=Ut;const zt="_emptyState_1jdpu_1",Wt="_title_1jdpu_17",Gt="_hint_1jdpu_29",P={emptyState:zt,title:Wt,hint:Gt},Xt=({message:t,hint:s})=>d.jsxs("div",{className:P.emptyState,children:[d.jsx("p",{className:P.title,children:t}),d.jsx("p",{className:P.hint,children:s})]}),Ht="_todoItem_b8nnb_1",qt="_todoItemEditing_b8nnb_31",Jt="_inputCheckbox_b8nnb_41",Qt="_inputEdit_b8nnb_87",Yt="_editButtons_b8nnb_95",Zt="_todosButtons_b8nnb_97",Kt="_title_b8nnb_111",b={todoItem:Ht,todoItemEditing:qt,inputCheckbox:Jt,inputEdit:Qt,editButtons:Yt,todosButtons:Zt,title:Kt},te=f.forwardRef((t,s)=>{const{id:a,title:e,completed:o,...n}=t,r=$(),i=k(E=>E.ui.editingId),l=i===a,[c,u]=f.useState(e),p=f.useRef(null);f.useImperativeHandle(s,()=>p.current),lt(i!==null),f.useEffect(()=>{l&&p.current&&p.current.scrollIntoView({behavior:"smooth",block:"center"})},[l]),f.useEffect(()=>{l||u(e)},[l,e]);const h=()=>{r(pt({id:a}))},m=()=>{r(q())},v=()=>{const E=c.trim();E&&E!==e&&r(ut({id:a,title:E})),r(q())},g=()=>{r(dt({id:a}))},F=()=>{r(ft({id:a}))},I=E=>{E.key==="Enter"?(E.preventDefault(),v()):E.key==="Escape"&&(E.preventDefault(),m())};return d.jsx("li",{ref:p,...n,className:`${b.todoItem} ${l?b.todoItemEditing:""}`,children:l?d.jsxs(d.Fragment,{children:[d.jsx(ct,{value:c,onChange:u,onKeyDown:I,placeholder:"Введите название задачи",className:b.inputEdit,autoFocus:!0}),d.jsxs("div",{className:b.editButtons,children:[d.jsx(j,{variant:"minimal","aria-label":"Сохранить изменения",onClick:v,children:"✔"}),d.jsx(j,{variant:"minimal","aria-label":"Отменить редактирование",onClick:m,children:"✖"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("input",{type:"checkbox",checked:o,onChange:g,className:b.inputCheckbox,readOnly:!0}),d.jsx("span",{className:b.title,children:e}),d.jsxs("div",{className:b.todosButtons,children:[d.jsx(j,{variant:"ghost","aria-label":"Редактировать задачу",onClick:h,children:"✎"}),d.jsx(j,{variant:"ghost","aria-label":"Удалить задачу",onClick:F,children:"🗑"})]})]})})}),ee=t=>t.todos.todos,ne=t=>t.filter,se=tt([ee,ne],(t,s)=>{switch(s){case"active":return t.filter(a=>!a.completed);case"completed":return t.filter(a=>a.completed);default:return t}});function oe(){const t=ht(),s=k(a=>a.todos.todos);f.useEffect(()=>{mt(t,s)},[s])}const ie="_todoList_ml59x_1",re="_enter_ml59x_25",ae="_enterActive_ml59x_35",le="_exit_ml59x_47",ce="_exitActive_ml59x_57",R={todoList:ie,enter:re,enterActive:ae,exit:le,exitActive:ce},ue=()=>{oe();const t=k(se);return d.jsx("ul",{className:R.todoList,children:t.length===0?d.jsx(Xt,{message:"Нет задач по выбранному фильтру",hint:"Попробуйте изменить фильтр или добавить новую задачу"}):d.jsx(H,{component:null,children:t.map(s=>{const a=x.createRef();return d.jsx(G,{timeout:300,classNames:{enter:R.enter,enterActive:R.enterActive,exit:R.exit,exitActive:R.exitActive},nodeRef:a,children:d.jsx(te,{ref:a,...s})},s.id)})})})},de="_todosSection_3fh89_1",pe="_todosControls_3fh89_23",fe="_todosActions_3fh89_41",V={todosSection:de,todosControls:pe,todosActions:fe},ve=()=>d.jsxs("section",{className:V.todosSection,children:[d.jsx("h1",{className:"pageTitle",children:"Список задач"}),d.jsxs("div",{className:V.todosControls,children:[d.jsx(kt,{}),d.jsxs("div",{className:V.todosActions,children:[d.jsx(It,{}),d.jsx(At,{})]})]}),d.jsx(ue,{})]});export{ve as default};
